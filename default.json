{
  "addLabels": [
    "{{depName}}"
  ],
  "baseBranchPatterns": [
    "main",
    "master"
  ],
  "commitMessagePrefix": "chore(renovatebot):",
  "customManagers": [
    {
      "customType": "regex",
      "description": "Update _VERSION variables in Dockerfiles",
      "managerFilePatterns": [
        "(^|/|\\.)Dockerfile$",
        "(^|/)Dockerfile\\.[^/]*$"
      ],
      "matchStrings": [
        "# renovate: datasource=(?<datasource>[a-z-]+?) depName=(?<depName>.+?)(?: (?:packageName|lookupName)=(?<packageName>.+?))?(?: versioning=(?<versioning>[a-z-]+?))?\\s(?:ENV|ARG) .+?_VERSION=(?<currentValue>.+?)\\s"
      ]
    },
    {
      "customType": "regex",
      "description": "Update _VERSION variables in shell scripts",
      "managerFilePatterns": [
        "\\.sh$"
      ],
      "matchStrings": [
        "# renovate: datasource=(?<datasource>[a-z-]+?) depName=(?<depName>.+?)(?: (?:packageName|lookupName)=(?<packageName>.+?))?(?: versioning=(?<versioning>[a-z-]+?))?\\s[A-Z_]+?_VERSION=(?<currentValue>.+?)\\s"
      ]
    },
    {
      "customType": "regex",
      "description": "Update `version:` and `_VERSION:` variables in github workflows",
      "managerFilePatterns": [
        "^\\.github/workflows/[^/]+\\.ya?ml$"
      ],
      "matchStrings": [
        "\\s+(?:[a-z]+(-|_))?version: (?<currentValue>.+?) # renovate: datasource=(?<datasource>.+?) depName=(?<depName>.+?)(?: (?:packageName|lookupName)=(?<packageName>.+?))?(?: versioning=(?<versioning>.+?))?\\s",
        "\\s*[A-Z_]+?_VERSION: (?<currentValue>.+?) # renovate: datasource=(?<datasource>.+?) depName=(?<depName>.+?)(?: (?:packageName|lookupName)=(?<packageName>.+?))?(?: versioning=(?<versioning>.+?))?\\s"
      ]
    }
  ],
  "draftPR": true,
  "extends": [
    "config:recommended",
    "helpers:pinGitHubActionDigestsToSemver",
    ":configMigration",
    ":pinDevDependencies",
    "customManagers:dockerfileVersions",
    "customManagers:githubActionsVersions"
  ],
  "ignorePaths": [
    "**/example/**",
    "lab/charts/*/*/values.yaml",
    "lab/charts/*/*/values.yml",
    "lab/charts/*/Chart.lock",
    "lab/charts/*/Chart.yaml",
    "lab/charts/*/Chart.yml",
    "lab/charts/*/charts/*/values.yaml",
    "lab/charts/*/charts/*/values.yml",
    "lab/charts/*/values.yaml",
    "lab/charts/*/values.yml"
  ],
  "labels": [
    "dependencies"
  ],
  "minimumReleaseAge": "7 days",
  "packageRules": [
    {
      "addLabels": [
        "major"
      ],
      "matchUpdateTypes": [
        "major"
      ]
    },
    {
      "addLabels": [
        "minor"
      ],
      "matchUpdateTypes": [
        "minor"
      ]
    },
    {
      "addLabels": [
        "patch"
      ],
      "matchUpdateTypes": [
        "patch"
      ]
    },
    {
      "addLabels": [
        "docker-compose"
      ],
      "matchManagers": [
        "docker-compose"
      ]
    },
    {
      "allowedVersions": "/^(16\\.8\\..*|15\\.10\\..*|14\\.6\\..*|https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraPostgreSQL.Updates.LTS.html)$/",
      "matchDepNames": [
        "postgres"
      ],
      "matchManagers": [
        "docker-compose"
      ]
    },
    {
      "addLabels": [
        "docker"
      ],
      "matchManagers": [
        "dockerfile"
      ]
    },
    {
      "addLabels": [
        "githubaction"
      ],
      "matchManagers": [
        "github-actions"
      ],
      "pinDigests": false
    },
    {
      "addLabels": [
        "githubaction"
      ],
      "matchDepTypes": [
        "action"
      ],
      "matchManagers": [
        "github-actions"
      ],
      "pinDigests": true
    },
    {
      "addLabels": [
        "terraform"
      ],
      "matchManagers": [
        "terraform"
      ]
    }
  ],
  "prConcurrentLimit": 99,
  "prHourlyLimit": 70,
  "rebaseWhen": "conflicted",
  "separateMinorPatch": true,
  "separateMultipleMajor": true,
  "separateMultipleMinor": true
}
